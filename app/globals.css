@import "tailwindcss";

@theme {
  --color-background: #0f172a;
  --color-foreground: #f8fafc;

  --color-slate-850: #151e32;
  --color-slate-950: #020617;

  --color-primary: #A855F7;
  --color-primary-foreground: #ffffff;
  --color-primary-glow: #a855f780;

  --color-accent-cyan: #06B6D4;
  --color-accent-emerald: #10B981;
  --color-accent-rose: #F43F5E;

  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-heading: var(--font-outfit), ui-sans-serif, system-ui, sans-serif;

  --backgroundImage-hero-glow: conic-gradient(from 180deg at 50% 50%, #A855F7 0deg, #3B82F6 180deg, #A855F7 360deg);
}

/* Custom Utilities that were missing */
@utility glass {
  background-color: rgb(15 23 42 / 0.6);
  backdrop-filter: blur(24px);
  border-width: 1px;
  border-color: rgb(255 255 255 / 0.1);
}

@utility text-gradient {
  background-clip: text;
  color: transparent;
  background-image: linear-gradient(to right, #ffffff, #94a3b8);
}

@utility text-gradient-primary {
  background-clip: text;
  color: transparent;
  background-image: linear-gradient(to right, #A855F7, #c084fc, #3b82f6);
}

/* Base styles to enforce dark mode */
@layer base {
  :root {
    --font-scale: 1;
    --contrast-filter: none;
    --link-decoration: none;
    --animation-play-state: running;
    --focus-outline-color: #A855F7;
    --focus-outline-width: 2px;
  }

  html {
    font-size: calc(16px * var(--font-scale));
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    transition: filter 0.3s ease;
    filter: var(--contrast-filter);
  }

  /* Global Focus Styles */
  :focus-visible {
    outline: var(--focus-outline-width) solid var(--focus-outline-color) !important;
    outline-offset: 2px !important;
  }

  /* Accessibility Utilities */
  body.a11y-paused *,
  body.a11y-paused *::before,
  body.a11y-paused *::after {
    animation-play-state: paused !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }

  body.a11y-highlight-links a {
    text-decoration: underline !important;
    text-decoration-color: yellow !important;
    text-decoration-thickness: 2px !important;
  }

  body.a11y-focus-highlight {
    --focus-outline-width: 4px;
    --focus-outline-color: #ffff00;
  }

  /* High Contrast Mode fallback if needed */
  body.a11y-contrast-plus {
    --contrast-filter: contrast(1.25) saturate(1.1);
  }

  /* Insuit Enhancements */
  /* Big Cursor */
  body.a11y-cursor-big,
  body.a11y-cursor-big * {
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24' fill='black' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z'%3E%3C/path%3E%3Cpath d='M13 13l6 6'%3E%3C/path%3E%3C/svg%3E") 10 10, auto !important;
  }

  /* Dyslexia Friendly Font */
  body.a11y-font-dyslexia {
    --font-sans: "Comic Sans MS", "Chalkboard SE", "Comic Neue", sans-serif !important;
    --font-heading: "Comic Sans MS", "Chalkboard SE", "Comic Neue", sans-serif !important;
    font-family: var(--font-sans) !important;
    line-height: 1.8 !important;
    letter-spacing: 0.05em !important;
    word-spacing: 0.1em !important;
  }

  body.a11y-font-dyslexia * {
    font-family: inherit !important;
    line-height: inherit !important;
    letter-spacing: inherit !important;
    word-spacing: inherit !important;
  }

  /* Highlight Headings */
  body.a11y-headers-highlight h1,
  body.a11y-headers-highlight h2,
  body.a11y-headers-highlight h3,
  body.a11y-headers-highlight h4,
  body.a11y-headers-highlight h5,
  body.a11y-headers-highlight h6 {
    outline: 2px dashed #A855F7 !important;
    outline-offset: 4px !important;
    background-color: rgba(168, 85, 247, 0.1) !important;
    border-radius: 4px !important;
    position: relative;
  }

  body.a11y-headers-highlight h1::before,
  body.a11y-headers-highlight h2::before,
  body.a11y-headers-highlight h3::before,
  body.a11y-headers-highlight h4::before,
  body.a11y-headers-highlight h5::before,
  body.a11y-headers-highlight h6::before {
    content: "H" attr(aria-level);
    /* Fallback if we use aria-level */
    /* Better generic approach for headings without aria-level explicitly set by JS */
    position: absolute;
    top: -1.5rem;
    left: 0;
    font-size: 0.75rem;
    background: #A855F7;
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    display: none;
    /* Hide default, maybe show on hover or simpler */
  }

  /* Reading Guide Base */
  body.a11y-reading-guide {
    /* No cursor change, handled by component */
  }
}